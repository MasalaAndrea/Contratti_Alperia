<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Riepilogo Dati Residenziale</title>
    <link rel="stylesheet" href="style.css">
    <style>
    .contatti-modal {
        position: fixed;
        z-index: 9999;
        left: 0;
        top: 0;
        width: 100vw;
        height: 100vh;
        overflow: auto;
        background: rgba(34, 40, 49, 0.25);
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .contatti-modal-content {
        background: linear-gradient(127deg, #e6f0fa 60%, #fff 100%);
        padding: 32px 32px 20px 32px;
        border-radius: 16px;
        min-width: 280px;
        max-width: 96vw;
        box-shadow: 0 4px 28px rgba(0,0,0,0.13);
        text-align: center;
        position: relative;
        border: 1px solid #dbeafe;
        font-family: 'Segoe UI', Arial, sans-serif;
    }
    .contatti-close {
        position: absolute;
        right: 16px;
        top: 12px;
        font-size: 2em;
        font-weight: bold;
        color: #7b8fa1;
        cursor: pointer;
        transition: color 0.18s;
        z-index: 10;
    }
    .contatti-close:hover { color: #d85c25; }
    .contatti-version {
        color: #999;
        font-size: 0.95em;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 7px;
        margin-top: 0;
    }
    .contatti-ver-ico {
        font-size: 1.15em;
        color: #1a76d2;
        vertical-align: middle;
    }
    </style>
</head>
<body class="residenziale">
    <div class="container">
        <h1>Riepilogo Dati Residenziale</h1>

        <!-- CARD DATI CLIENTE -->
        <div id="riepilogo-card-cliente" class="card-dati-cliente card-centrale">
            <div id="riepilogo-agente"></div>
            <!-- I dati cliente vengono popolati da JS -->
        </div>
        <!-- CARD DATI TECNICI -->
        <div id="riepilogo-card-tecnici" class="card-dati-tecnici card-centrale">
            <!-- I dati tecnici vengono popolati da JS -->
        </div>
        <!-- CARD PAGAMENTO E CONSENSI -->
        <div id="riepilogo-card-consensi" class="card-consensi card-centrale">
            <!-- I dati pagamento/consensi vengono popolati da JS -->
        </div>

        <div class="form-group" style="margin-top:32px;">
    <label for="nome_file_pdf">Nome del file PDF:</label>
    <input type="text" id="Condizioni_Generali_Retail.pdf" placeholder="Condizioni_Generali_Retail.pdf">
</div>

<!-- AGGIUNTA CHECKBOX CONDIZIONI GENERALI -->
<div class="form-group">
  <label class="checkbox-allega">
    <input type="checkbox" id="allega-condizioni-generali">
    <span>Allega Condizioni Generali</span>
  </label>
</div>

        <button id="genera-pdf-btn" class="main-btn">Genera Contratto</button>
        <button id="condividi-pdf-btn" class="main-btn" style="display:none; margin-top:12px;">Condividi PDF</button>
        <span id="condividi-pdf-msg" style="display:none; color:green; margin-left:12px;"></span>
       
        <div class="form-group" style="margin-top:32px;">
            <label for="nome_bozza">Nome della bozza:</label>
             <input type="text" id="nome_bozza" placeholder="Nome della bozza (es: Rossi_10set)">
             <button id="salva-bozza-btn" class="bozza-btn" style="margin-left:8px;">Salva bozza</button>
             <button onclick="window.location.href='index.html'" class="home-btn">HOME</button>
             <span id="salva-bozza-msg" style="display:none; color:green; margin-left:12px;">Compilazione salvata!</span>
        </div>
    </div>
    <div id="avviso-documenti" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(40,40,40,0.33); z-index:9999;">
      <div style="background:#fffbe6; border:2px solid #ff0000; max-width:350px; margin:60px auto; padding:28px 16px; border-radius:8px; color:#333; font-size:1.15em; box-shadow:0 2px 18px rgba(0,0,0,0.12); text-align:left;">
        <strong>Attenzione!</strong>
        <br>
        Ricordati di richiedere al cliente copia dei seguenti documenti:
        <ul style="margin-top:10px; margin-bottom:10px;">
          <li>Documento d'identità</li>
          <li>Bollette energia</li>
          <li>Bollette gas</li>
        </ul>
        <button id="avviso-ok-btn" style="display:block; margin:18px auto 0 auto; padding:7px 22px; font-size:1em; border-radius:5px; border:none; background:#ff9800; color:#fff; cursor:pointer;">OK</button>
      </div>
    </div>
    <footer class="main-footer">
    © 2025 M-ENERGY | <a href="#">Privacy</a> | <a href="#" id="contatti-link">Contatti</a>
    </footer>
    <script src="https://cdn.jsdelivr.net/npm/pdf-lib/dist/pdf-lib.min.js"></script>
    <script src="riepilogo.js"></script>
    <!-- MODAL CONTATTI -->
    <div id="contatti-modal" class="contatti-modal" style="display:none;">
        <div class="contatti-modal-content">
            <span class="contatti-close" id="contatti-close">&times;</span>
            <h3>Contatti</h3>
            <p><strong>Masala Andrea</strong></p>
            <p>
                <a href="https://masalaenergia.it" target="_blank">masalaenergia.it</a><br>
                <a href="mailto:info@masalaenergia.it">info@masalaenergia.it</a>
            </p>
            <hr style="margin:18px 0 12px 0;">
            <div class="contatti-version">
                <span class="contatti-ver-ico">&#128187;</span>
                <span>Ver 2.0.0</span>
            </div>
        </div>
    </div>
    <!-- SCRIPT DEL MODALE CONTATTI -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const contattiLink = document.getElementById('contatti-link');
        const contattiModal = document.getElementById('contatti-modal');
        const contattiClose = document.getElementById('contatti-close');
        if (contattiLink && contattiModal && contattiClose) {
            contattiLink.addEventListener('click', function(e) {
                e.preventDefault();
                contattiModal.style.display = 'flex';
            });
            contattiClose.addEventListener('click', function() {
                contattiModal.style.display = 'none';
            });
            window.addEventListener('click', function(event) {
                if (event.target === contattiModal) {
                    contattiModal.style.display = 'none';
                }
            });
        }
    });
    </script>
</body>
</html>